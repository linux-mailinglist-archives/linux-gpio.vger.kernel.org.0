Return-Path: <linux-gpio-owner@vger.kernel.org>
X-Original-To: lists+linux-gpio@lfdr.de
Delivered-To: lists+linux-gpio@lfdr.de
Received: from vger.kernel.org (vger.kernel.org [23.128.96.18])
	by mail.lfdr.de (Postfix) with ESMTP id E5E3F1F11F6
	for <lists+linux-gpio@lfdr.de>; Mon,  8 Jun 2020 05:59:14 +0200 (CEST)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S1728943AbgFHD66 (ORCPT <rfc822;lists+linux-gpio@lfdr.de>);
        Sun, 7 Jun 2020 23:58:58 -0400
Received: from mga09.intel.com ([134.134.136.24]:21880 "EHLO mga09.intel.com"
        rhost-flags-OK-OK-OK-OK) by vger.kernel.org with ESMTP
        id S1728906AbgFHD66 (ORCPT <rfc822;linux-gpio@vger.kernel.org>);
        Sun, 7 Jun 2020 23:58:58 -0400
IronPort-SDR: VvttQhGkjBg2LlY7NMdJXGHOt3Hl9nysFhNg9Sd5MqJa4Q4pvUdj60e7mrANft7jyhOcDuQh6I
 k0E606bse35A==
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from fmsmga008.fm.intel.com ([10.253.24.58])
  by orsmga102.jf.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384; 07 Jun 2020 20:58:57 -0700
IronPort-SDR: WtoKQV2WFqGl65BOjpBdZcw4FAynj+8SGCKwND39mv0O8RgDJHntwlE/HqOAt4Vvz/lvzKstpX
 AiyqxaDiOlSg==
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.73,486,1583222400"; 
   d="scan'208";a="259708361"
Received: from smile.fi.intel.com (HELO smile) ([10.237.68.40])
  by fmsmga008.fm.intel.com with ESMTP; 07 Jun 2020 20:58:56 -0700
Received: from andy by smile with local (Exim 4.93)
        (envelope-from <andriy.shevchenko@linux.intel.com>)
        id 1ji8w7-00BaBI-6W; Mon, 08 Jun 2020 06:58:59 +0300
Date:   Mon, 8 Jun 2020 06:58:59 +0300
From:   Andy Shevchenko <andriy.shevchenko@linux.intel.com>
To:     kernel test robot <lkp@intel.com>
Cc:     kbuild-all@lists.01.org, linux-kernel@vger.kernel.org,
        Linus Walleij <linus.walleij@linaro.org>,
        linux-gpio@vger.kernel.org
Subject: Re: [PATCH] pinctrl: mcp23s08: Split to three parts: fix
 ptr_ret.cocci warnings
Message-ID: <20200608035859.GB2428291@smile.fi.intel.com>
References: <202006080944.vTmpp64f%lkp@intel.com>
 <20200608010253.GA79576@44f7ab9e8d59>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Disposition: inline
Content-Transfer-Encoding: 8bit
In-Reply-To: <20200608010253.GA79576@44f7ab9e8d59>
Organization: Intel Finland Oy - BIC 0357606-4 - Westendinkatu 7, 02160 Espoo
Sender: linux-gpio-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-gpio.vger.kernel.org>
X-Mailing-List: linux-gpio@vger.kernel.org

On Mon, Jun 08, 2020 at 09:02:53AM +0800, kernel test robot wrote:
> From: kernel test robot <lkp@intel.com>
> 
> drivers/pinctrl/pinctrl-mcp23s08_spi.c:129:1-3: WARNING: PTR_ERR_OR_ZERO can be used
> 
> 
>  Use PTR_ERR_OR_ZERO rather than if(IS_ERR(...)) + PTR_ERR
> 
> Generated by: scripts/coccinelle/api/ptr_ret.cocci

Makes sense.
Acked-by: Andy Shevchenko <andriy.shevchenko@linux.intel.com>

> 
> Fixes: 0f04a81784fe ("pinctrl: mcp23s08: Split to three parts: core, I²C, SPI")
> CC: Andy Shevchenko <andriy.shevchenko@linux.intel.com>
> Signed-off-by: kernel test robot <lkp@intel.com>
> ---
> 
> tree:   https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git master
> head:   cf0c97f148e9e50aa5a7ddd1984a604dd2bde4af
> commit: 0f04a81784fe3ddc00cae74c517265b3ddb8825c pinctrl: mcp23s08: Split to three parts: core, I²C, SPI
> 
>  pinctrl-mcp23s08_spi.c |    5 +----
>  1 file changed, 1 insertion(+), 4 deletions(-)
> 
> --- a/drivers/pinctrl/pinctrl-mcp23s08_spi.c
> +++ b/drivers/pinctrl/pinctrl-mcp23s08_spi.c
> @@ -126,10 +126,7 @@ static int mcp23s08_spi_regmap_init(stru
>  	copy->name = name;
>  
>  	mcp->regmap = devm_regmap_init(dev, &mcp23sxx_spi_regmap, mcp, copy);
> -	if (IS_ERR(mcp->regmap))
> -		return PTR_ERR(mcp->regmap);
> -
> -	return 0;
> +	return PTR_ERR_OR_ZERO(mcp->regmap);
>  }
>  
>  static int mcp23s08_probe(struct spi_device *spi)

-- 
With Best Regards,
Andy Shevchenko


